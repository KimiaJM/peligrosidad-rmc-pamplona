import Handlebars from"handlebars/dist/handlebars";Handlebars.noConflict(),Handlebars.registerHelper("i18n",(function(e,t){const r=TC.i18n.currentLocale[e];return"string"==typeof r?t?new Handlebars.SafeString(r):r:e})),Handlebars.registerHelper("gt",(function(e,t){return e>t})),Handlebars.registerHelper("lt",(function(e,t){return e<t})),Handlebars.registerHelper("eq",(function(e,t){return e==t})),Handlebars.registerHelper("every",(function(){return Array.from(arguments).slice(0,arguments.length-1).every((e=>e))})),Handlebars.registerHelper("round",(function(e){return Math.round(e)})),Handlebars.registerHelper("lowerCase",(function(e){return e&&e.toLowerCase()})),Handlebars.registerHelper("startsWith",(function(e,t){return e&&e.toString().startsWith(t)})),Handlebars.registerHelper("isPlainObject",(function(e){return e&&e instanceof Object&&!Array.isArray(e)&&!(e instanceof Date)})),Handlebars.registerHelper("isEmpty",(function(e){return!!e&&0===Object.keys(e).length})),Handlebars.registerHelper("isArray",(function(e){return Array.isArray(e)})),Handlebars.registerHelper("isNumber",(function(e){return"number"==typeof e})),Handlebars.registerHelper("isBoolean",(function(e){return"boolean"==typeof e})),Handlebars.registerHelper("isUrl",(function(e){return e&&/^(http|https|ftp|mailto)\:\/\//i.test(e)})),Handlebars.registerHelper("getYoutubeId",(function(e){if(e){const t=e.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);if(t)return t[1]}return null})),Handlebars.registerHelper("getHeader",(function(e){if(e){const t=e.match(/^(h\d+)_/);if(t)return t[1]}return null}));const tagRegExp=/(?:__(image|video|audio|embed)(?:_(\d+|auto)_(\d+|auto))?$)|(?:^(image|video|audio|embed)(?:_(\d+|auto)_(\d+|auto))?__)/,getAttributeTag=function(e){if(e&&"string"==typeof e){const t=e.match(tagRegExp);if(t)return t[1]||t[4]}return null},getAttributeTagDimension=function(e,t){if(e){const r=e.match(tagRegExp);if(r){const e=r[t+1]||r[t+4];return"auto"!==e?e?e+"px":"auto":e}}return null},isSpecialAttribute=function(e,t,r){return getAttributeTag(e)===r||getAttributeTag(t)===r};Handlebars.registerHelper("isVideoAttribute",(function(e,t){return isSpecialAttribute(e,t,"video")})),Handlebars.registerHelper("isAudioAttribute",(function(e,t){return isSpecialAttribute(e,t,"audio")})),Handlebars.registerHelper("isImageAttribute",(function(e,t){return isSpecialAttribute(e,t,"image")})),Handlebars.registerHelper("isEmbedAttribute",(function(e,t){return isSpecialAttribute(e,t,"embed")})),Handlebars.registerHelper("hasDisplayName",(function(e){return e&&Object.prototype.hasOwnProperty.call(e,"displayName")&&Object.prototype.hasOwnProperty.call(e,"toString")})),Handlebars.registerHelper("getTagWidth",(function(e,t){let r=getAttributeTagDimension(e,1);return r||(r=getAttributeTagDimension(t,1)),r})),Handlebars.registerHelper("getTagHeight",(function(e,t){let r=getAttributeTagDimension(e,2);return r||(r=getAttributeTagDimension(t,2)),r})),Handlebars.registerHelper("removeSpecialAttributeTag",(function(e){if(!e)return null;if("string"==typeof e){const t=e.match(tagRegExp);if(t){const r="__";return 0===t[0].indexOf(r)?e.substr(0,e.lastIndexOf(r)):e.substr(e.indexOf(r)+r.length)}}return e})),Handlebars.registerHelper("isKeyValue",(function(e){return e&&Object.prototype.hasOwnProperty.call(e,"value")&&"object"!=typeof e.value})),Handlebars._getIdHelperIds=[],Handlebars.registerHelper("getId",(function(e){let t=Handlebars._getIdHelperIds.find((t=>t.obj===e));return t||Handlebars._getIdHelperIds.push(t={obj:e,id:TC.getUID()}),t.id})),Handlebars.registerHelper("countif",(function(e,t){const r=t?t.split(","):[];let n=0;for(let t in e)r.indexOf(t)<0&&n++;return n>0}));const dateTimeRegEx=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])[T\s](2[0-3]|[01][0-9]):[0-5][0-9](:[0-5][0-9])?(\.[0-9]{0,3}){0,1}Z?$/,dateRegEx=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])Z?$/,timeRegEx=/^(2[0-3]|[01][0-9]):([0-5][0-9])(?:(?::([0-5][0-9])(?:\.([0-9]{1,3}))?)){0,1}Z?$/;Handlebars.registerHelper("formatDateNumberOrBoolean",(function(e){if(e&&(e instanceof Date||dateTimeRegEx.test(e)))return new Date(e).toLocaleString(TC.i18n.currentLocaleKey&&TC.i18n.currentLocaleKey.length>2?TC.i18n.currentLocaleKey.substr(0,2):TC.i18n.currentLocaleKey,{hour12:!1});if(e&&dateRegEx.test(e))return Number.isNaN(Date.parse(e))&&(e=e.replace("Z","")),new Date(e).toLocaleDateString(TC.i18n.currentLocaleKey&&TC.i18n.currentLocaleKey.length>2?TC.i18n.currentLocaleKey.substr(0,2):TC.i18n.currentLocaleKey);if("number"==typeof e)return TC.Util.formatNumber(e,TC.i18n.currentLocaleKey);if("string"==typeof e){const t=e.toLowerCase();if("true"===t)return TC.i18n.currentLocale.yes;if("false"===t)return TC.i18n.currentLocale.no}return!0===e?TC.i18n.currentLocale.yes:!1===e?TC.i18n.currentLocale.no:e}));const getDate=function(e){return e instanceof Date?e:dateRegEx.test(e)||dateTimeRegEx.test(e)?new Date(e):void 0},getTime=function(e){if("string"==typeof e){const t=e.match(timeRegEx);if(t){const[,e,r,n,i]=t;return{hours:e,minutes:r,seconds:n,milliseconds:i}}}},inputDate=function(e){const t=getDate(e);return t?`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`:""};Handlebars.registerHelper("inputDate",inputDate);const inputTime=function(e){const t=getTime(e);return t?`${t.hours}:${t.minutes}:${t.seconds??"00"}.${t.milliseconds??"000"}`:""};Handlebars.registerHelper("inputTime",inputTime),Handlebars.registerHelper("inputDatetime",(function(e){const t=inputDate(e);if(t){let r=e.indexOf("T"),n=e.indexOf(" ");const i=r<0?n:r,a=inputTime(e.substring(i+1));return a?`${t}T${a}`:t}return""})),Handlebars.registerHelper("formatNumber",(function(e,t){return e.toLocaleString(t)}));export default Handlebars;