document.querySelectorAll(".tc-map").forEach((function(t){const e=SITNA.Map.get(t);e&&!e._layoutDone&&(TC.Cfg.applyChanges=function(t){var e,n=t instanceof Array?t:[t];n&&n.forEach((function(t){var n=t.apply,s=n.elements instanceof Array?n.elements:[n.elements];(e=t.map||e||SITNA.Map.get(document.querySelector(".tc-map"))).div.addEventListener(n.event,TC.EventTarget.listenerBySelector(s.join(),(function(){window.matchMedia(t.screenCondition).matches&&n.changes.forEach((function(t){var n=Array.isArray(t.targets)?t.targets:[t.targets],s=Array.isArray(t.classes)?t.classes:[t.classes];e.div.querySelectorAll(n.join()).forEach((function(t){s.forEach((function(e){t.classList.add(e)}))}))}))})))}))},window.matchMedia("screen and (max-width: 40em), screen and (max-height: 40em)").matches&&(e.defaultInfoContainer=SITNA.Consts.infoContainer.RESULTS_PANEL),e.ready((function(){e.controls.forEach((t=>{t instanceof HTMLElement&&t.parentElement&&t.parentElement.classList.contains(SITNA.Consts.classes.COLLAPSED)&&t.classList.add(SITNA.Consts.classes.COLLAPSED)}));const t=e.div.querySelector(`.${TC.Consts.classes.OVERVIEW_MAP_PANEL},.ovmap-panel`),n=TC.Consts.classes.COLLAPSED_RIGHT||"right-collapsed",s=TC.Consts.classes.COLLAPSED_LEFT||"left-collapsed",o=e.getControlsByClass("TC.control.OverviewMap")[0];e.div.querySelectorAll(`.${TC.Consts.classes.RIGHT_PANEL} > h1, .right-panel > h1`).forEach((function(s){s.addEventListener(SITNA.Consts.event.CLICK,(function(s){s.preventDefault(),s.stopPropagation();const a=s.target.parentElement,c=a.classList.toggle(n);e&&a===t&&o&&(c?o.disable():setTimeout((function(){o.enable()}),250))}))})),e.div.querySelectorAll(`.${TC.Consts.classes.LEFT_PANEL} > h1`).forEach((function(t){t.addEventListener(SITNA.Consts.event.CLICK,(function(t){t.preventDefault(),t.stopPropagation(),t.target.parentElement.classList.toggle(s)}))}));const a=e.div.querySelector("."+TC.Consts.classes.TOOLS_PANEL)||e.div.querySelector("#tools-panel"),c=e.getControlsByClass(TC.control.Search).concat(e.getControlsByClass(TC.control.LanguageSelector)).concat(e.controls.filter((t=>t.containerControl))).map((t=>t.id)).filter((t=>a.querySelector("#"+t))),l=function(t){const e=this;let n;n=e instanceof TC.control.WebComponentControl?e:e.div,c.includes(e.id)||n.classList.toggle(SITNA.Consts.classes.COLLAPSED,t)};if(e.on(SITNA.Consts.event.CONTROLHIGHLIGHT,(function(t){const n=t.control;if(l.call(n,!1),e.layout&&e.layout.accordion){const t=e.controls.filter((t=>!t.containerControl)).filter((t=>t.div&&a.contains(t.div)));t.includes(n)&&t.filter((t=>t!==n)).forEach((t=>t.unhighlight()))}})).on(SITNA.Consts.event.CONTROLUNHIGHLIGHT,(function(t){const e=t.control;l.call(e,!0)})),a.addEventListener(SITNA.Consts.event.CLICK,(function(t){let n=t.target;if("BUTTON"!==n.tagName&&"SITNA-BUTTON"!==n.tagName&&"SITNA-TOGGLE"!==n.tagName||!n.closest("div.tc-ctl."+SITNA.Consts.classes.COLLAPSED)||(n=n.parentElement),"H2"===n.tagName)for(var s=0;s<e.controls.length;s++){const t=e.controls[s];if(t.div&&t.div.contains(n)){t.isHighlighted()?t.unhighlight():t.highlight();break}}})),e.loaded((function(){const t=e.getControlsByClass("TC.control.OverviewMap")[0];t&&t.loaded((function(){t.disable()}));const s=e.getControlsByClass("TC.control.WorkLayerManager")[0],o=e.getControlsByClass("TC.control.MultiFeatureInfo")[0];s&&o&&(s.div.querySelector("."+s.CLASS+"-content").insertAdjacentElement("afterend",o.div),o.containerControl=s),TC.Cfg.applyChanges([{map:e,screenCondition:"(max-width: 42em)",apply:{event:"click",elements:[".tc-ctl-bms-node > label",".tc-ctl-meas-select sitna-tab",".tc-ctl-mod-btn-select",".tc-ctl-mod-btn-del-vertex"],changes:[{targets:"."+TC.Consts.classes.TOOLS_PANEL,classes:n}]}}])})),SITNA.Consts.event.TOOLSCLOSE=SITNA.Consts.event.TOOLSCLOSE||"toolsclose.tc",SITNA.Consts.event.TOOLSOPEN=SITNA.Consts.event.TOOLSOPEN||"toolsopen.tc",e.on(SITNA.Consts.event.TOOLSOPEN,(function(t){e.div.querySelector("."+TC.Consts.classes.TOOLS_PANEL).classList.remove(n)})),e.on(SITNA.Consts.event.TOOLSCLOSE,(function(t){e.div.querySelector("."+TC.Consts.classes.TOOLS_PANEL).classList.add(n)})),TC.browserFeatures.touch()){const t=function(t){const n=".tc-"+t+"-panel",s="tc-collapsed-"+t,o={[t]:function(){this.classList.add(s)}};e.div.querySelectorAll(n).forEach((function(t){TC.Util.swipe(t,o)}))};t("right"),t("left")}})),e._layoutDone=!0)}));