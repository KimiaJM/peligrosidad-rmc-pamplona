(self.webpackChunksitna_map_project_by_kimia_jimenez_majidi=self.webpackChunksitna_map_project_by_kimia_jimenez_majidi||[]).push([[4504],{563:(e,t,i)=>{const r=i(8556);function n(e,t,i){const n=[],o=i&&i.debug||!1,a=!i||"boolean"!=typeof i.nested||i.nested;let s,l=i&&i.startIndex||0;for(;s=r(e,t,{debug:o,startIndex:l});)l=a?s.start+1+t.length:s.end,n.push(s);return o&&console.log("findTagsByName found",n.length,"tags"),n}e.exports=n,e.exports.default=n},3614:e=>{function t(e,t,i){const r=new RegExp(t).exec(e.slice(i));return r?i+r.index:-1}e.exports=t,e.exports.default=t},4504:(e,t,i)=>{"use strict";function r(e){return(t,...i)=>o(e,t,i)}function n(e,t){return r(c(e,t).get)}i.r(t),i.d(t,{default:()=>Ne});const{apply:o,construct:a,defineProperty:s,get:l,getOwnPropertyDescriptor:c,getPrototypeOf:u,has:h,ownKeys:f,set:d,setPrototypeOf:g}=Reflect,{EPSILON:m,MAX_SAFE_INTEGER:p,isFinite:y,isNaN:w}=Number,{iterator:S,species:T,toStringTag:b,for:x}=Symbol,v=Object,{create:D,defineProperty:I,freeze:C,is:M}=v,P=v.prototype,E=(P.__lookupGetter__&&r(P.__lookupGetter__),v.hasOwn||r(P.hasOwnProperty),Array),A=(E.isArray,E.prototype),G=(r(A.join),r(A.push),r(A.toLocaleString),A[S]),R=r(G),{abs:O,trunc:L}=Math,U=ArrayBuffer,N=(U.isView,U.prototype),_=(r(N.slice),n(N,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),F=(_&&n(_.prototype,"byteLength"),u(Uint8Array)),B=(F.from,F.prototype),V=(B[S],r(B.keys),r(B.values),r(B.entries),r(B.set),r(B.reverse),r(B.fill),r(B.copyWithin),r(B.sort),r(B.slice),r(B.subarray),n(B,"buffer"),n(B,"byteOffset"),n(B,"length"),n(B,b),Uint8Array),k=Uint16Array,H=Uint32Array,q=Float32Array,W=u([][S]()),j=r(W.next),K=r(function*(){}().next),$=u(W),Y=DataView.prototype,X=r(Y.getUint16),z=(r(Y.setUint16),TypeError,WeakSet.prototype),Z=(r(z.add),r(z.has),WeakMap),J=Z.prototype,Q=r(J.get),ee=(r(J.has),r(J.set)),te=new Z,ie=D(null,{next:{value:function(){const e=Q(te,this);return j(e)}},[S]:{value:function(){return this}}}),re=new Z,ne=D($,{next:{value:function(){const e=Q(re,this);return K(e)},writable:!0,configurable:!0}});for(const e of f(W))"next"!==e&&I(ne,e,c(W,e));const oe=new U(4),ae=new q(oe),se=new H(oe),le=new k(512),ce=new V(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(le[e]=0,le[256|e]=32768,ce[e]=24,ce[256|e]=24):t<-14?(le[e]=1024>>-t-14,le[256|e]=1024>>-t-14|32768,ce[e]=-t-1,ce[256|e]=-t-1):t<=15?(le[e]=t+15<<10,le[256|e]=t+15<<10|32768,ce[e]=13,ce[256|e]=13):t<128?(le[e]=31744,le[256|e]=64512,ce[e]=24,ce[256|e]=24):(le[e]=31744,le[256|e]=64512,ce[e]=13,ce[256|e]=13)}const ue=new H(2048);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;!(8388608&t);)t<<=1,i-=8388608;t&=-8388609,i+=947912704,ue[e]=t|i}for(let e=1024;e<2048;++e)ue[e]=939524096+(e-1024<<13);const he=new H(64);for(let e=1;e<31;++e)he[e]=e<<23;he[31]=1199570944,he[32]=2147483648;for(let e=33;e<63;++e)he[e]=2147483648+(e-32<<23);he[63]=3347054592;const fe=new k(64);for(let e=1;e<64;++e)32!==e&&(fe[e]=1024);function de(e,t,...i){return function(e){const t=e>>10;return se[0]=ue[fe[t]+(1023&e)]+he[t],ae[0]}(X(e,t,...function(e){if(e[S]===G&&W.next===j)return e;const t=D(ie);return ee(te,t,R(e)),t}(i)))}var ge=i(7379),me=i(563),pe=i(8622);const ye=new Map;function we(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>ye.set(e,t)))}function Se(e,t,i,r=1){return new(Object.getPrototypeOf(e).constructor)(t*i*r)}function Te(e,t,i){return(1-i)*e+i*t}function be(e,t,i){let r=0;for(let n=t;n<i;++n)r+=e[n];return r}function xe(e,t,i){switch(e){case 1:if(t<=8)return new Uint8Array(i);if(t<=16)return new Uint16Array(i);if(t<=32)return new Uint32Array(i);break;case 2:if(8===t)return new Int8Array(i);if(16===t)return new Int16Array(i);if(32===t)return new Int32Array(i);break;case 3:switch(t){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}}throw Error("Unsupported data format/bitsPerSample")}we([void 0,1],(()=>i.e(5121).then(i.bind(i,7502)).then((e=>e.default)))),we(5,(()=>i.e(2764).then(i.bind(i,2764)).then((e=>e.default)))),we(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),we(7,(()=>i.e(6457).then(i.bind(i,6457)).then((e=>e.default)))),we([8,32946],(()=>Promise.all([i.e(148),i.e(424)]).then(i.bind(i,424)).then((e=>e.default)))),we(32773,(()=>i.e(1030).then(i.bind(i,1030)).then((e=>e.default)))),we(34887,(()=>Promise.all([i.e(148),i.e(1414)]).then(i.bind(i,1414)).then((async e=>(await e.zstd.init(),e))).then((e=>e.default)))),we(50001,(()=>i.e(6568).then(i.bind(i,6568)).then((e=>e.default))));const ve=class{constructor(e,t,i,r,n,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=i,this.littleEndian=r,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,i=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(e,t){return de(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return xe(this.getSampleFormat(e),this.getBitsPerSample(e),t)}async getTileOrStrip(e,t,i,r,n){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:l}=this;let c,u;1===this.planarConfiguration?s=t*o+e:2===this.planarConfiguration&&(s=i*o*a+t*o+e),this.isTiled?(c=this.fileDirectory.TileOffsets[s],u=this.fileDirectory.TileByteCounts[s]):(c=this.fileDirectory.StripOffsets[s],u=this.fileDirectory.StripByteCounts[s]);const h=(await this.source.fetch([{offset:c,length:u}],n))[0];let f;return null!==l&&l[s]?f=l[s]:(f=(async()=>{let e=await r.decode(this.fileDirectory,h);const i=this.getSampleFormat(),n=this.getBitsPerSample();return function(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}(i,n)&&(e=function(e,t,i,r,n,o,a){const s=new DataView(e),l=2===i?1:r,c=xe(t,n,2===i?a*o:a*o*r),u=parseInt("1".repeat(n),2);if(1===t){let e;e=1===i?r*n:n;let t=o*e;7&t&&(t=t+7&-8);for(let e=0;e<a;++e){const i=e*t;for(let t=0;t<o;++t){const r=i+t*l*n;for(let i=0;i<l;++i){const a=r+i*n,h=(e*o+t)*l+i,f=Math.floor(a/8),d=a%8;if(d+n<=8)c[h]=s.getUint8(f)>>8-n-d&u;else if(d+n<=16)c[h]=s.getUint16(f)>>16-n-d&u;else if(d+n<=24){const e=s.getUint16(f)<<8|s.getUint8(f+2);c[h]=e>>24-n-d&u}else c[h]=s.getUint32(f)>>32-n-d&u}}}}return c.buffer}(e,i,this.planarConfiguration,this.getSamplesPerPixel(),n,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[s]=f)),{x:e,y:t,sample:i,data:await f}}async _readRaster(e,t,i,r,n,o,a,s,l){const c=this.getTileWidth(),u=this.getTileHeight(),h=this.getWidth(),f=this.getHeight(),d=Math.max(Math.floor(e[0]/c),0),g=Math.min(Math.ceil(e[2]/c),Math.ceil(h/c)),m=Math.max(Math.floor(e[1]/u),0),p=Math.min(Math.ceil(e[3]/u),Math.ceil(f/u)),y=e[2]-e[0];let w=this.getBytesPerPixel();const S=[],T=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?S.push(be(this.fileDirectory.BitsPerSample,0,t[e])/8):S.push(0),T.push(this.getReaderForSample(t[e]));const b=[],{littleEndian:x}=this;for(let o=m;o<p;++o)for(let a=d;a<g;++a){let s;1===this.planarConfiguration&&(s=this.getTileOrStrip(a,o,0,n,l));for(let d=0;d<t.length;++d){const g=d,m=t[d];2===this.planarConfiguration&&(w=this.getSampleByteSize(m),s=this.getTileOrStrip(a,o,m,n,l));const p=s.then((n=>{const o=n.data,a=new DataView(o),s=this.getBlockHeight(n.y),l=n.y*u,d=n.x*c,m=l+s,p=(n.x+1)*c,b=T[g],v=Math.min(s,s-(m-e[3]),f-l),D=Math.min(c,c-(p-e[2]),h-d);for(let n=Math.max(0,e[1]-l);n<v;++n)for(let o=Math.max(0,e[0]-d);o<D;++o){const s=(n*c+o)*w,u=b.call(a,s+S[g],x);let h;r?(h=(n+l-e[1])*y*t.length+(o+d-e[0])*t.length+g,i[h]=u):(h=(n+l-e[1])*y+o+d-e[0],i[g][h]=u)}}));b.push(p)}}if(await Promise.all(b),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let n;return n=r?function(e,t,i,r,n,o,a="nearest"){switch(a.toLowerCase()){case"nearest":return function(e,t,i,r,n,o){const a=t/r,s=i/n,l=Se(e,r,n,o);for(let c=0;c<n;++c){const n=Math.min(Math.round(s*c),i-1);for(let i=0;i<r;++i){const s=Math.min(Math.round(a*i),t-1);for(let a=0;a<o;++a){const u=e[n*t*o+s*o+a];l[c*r*o+i*o+a]=u}}}return l}(e,t,i,r,n,o);case"bilinear":case"linear":return function(e,t,i,r,n,o){const a=t/r,s=i/n,l=Se(e,r,n,o);for(let c=0;c<n;++c){const n=s*c,u=Math.floor(n),h=Math.min(Math.ceil(n),i-1);for(let i=0;i<r;++i){const s=a*i,f=s%1,d=Math.floor(s),g=Math.min(Math.ceil(s),t-1);for(let a=0;a<o;++a){const s=e[u*t*o+d*o+a],m=e[u*t*o+g*o+a],p=e[h*t*o+d*o+a],y=e[h*t*o+g*o+a],w=Te(Te(s,m,f),Te(p,y,f),n%1);l[c*r*o+i*o+a]=w}}}return l}(e,t,i,r,n,o);default:throw new Error(`Unsupported resampling method: '${a}'`)}}(i,e[2]-e[0],e[3]-e[1],o,a,t.length,s):function(e,t,i,r,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(e,t,i,r,n){const o=t/r,a=i/n;return e.map((e=>{const s=Se(e,r,n);for(let l=0;l<n;++l){const n=Math.min(Math.round(a*l),i-1);for(let i=0;i<r;++i){const a=Math.min(Math.round(o*i),t-1),c=e[n*t+a];s[l*r+i]=c}}return s}))}(e,t,i,r,n);case"bilinear":case"linear":return function(e,t,i,r,n){const o=t/r,a=i/n;return e.map((e=>{const s=Se(e,r,n);for(let l=0;l<n;++l){const n=a*l,c=Math.floor(n),u=Math.min(Math.ceil(n),i-1);for(let i=0;i<r;++i){const a=o*i,h=a%1,f=Math.floor(a),d=Math.min(Math.ceil(a),t-1),g=e[c*t+f],m=e[c*t+d],p=e[u*t+f],y=e[u*t+d],w=Te(Te(g,m,h),Te(p,y,h),n%1);s[l*r+i]=w}}return s}))}(e,t,i,r,n);default:throw new Error(`Unsupported resampling method: '${o}'`)}}(i,e[2]-e[0],e[3]-e[1],o,a,s),n.width=o,n.height=a,n}return i.width=o||e[2]-e[0],i.height=a||e[3]-e[1],i}async readRasters({window:e,samples:t=[],interleave:i,pool:r=null,width:n,height:o,resampleMethod:a,fillValue:s,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=(c[2]-c[0])*(c[3]-c[1]),h=this.getSamplesPerPixel();if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=h)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<h;++e)t.push(e);let f;if(i)f=xe(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*t.length),s&&f.fill(s);else{f=[];for(let e=0;e<t.length;++e){const i=this.getArrayForSample(t[e],u);Array.isArray(s)&&e<s.length?i.fill(s[e]):s&&!Array.isArray(s)&&i.fill(s),f.push(i)}}const d=r||await async function(e){const t=ye.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);return new(await t())(e)}(this.fileDirectory);return await this._readRaster(c,t,f,i,d,n,o,a,l)}async readRGB({window:e,interleave:t=!0,pool:i=null,width:r,height:n,resampleMethod:o,enableAlpha:a=!1,signal:s}={}){const l=e||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===pe.ub.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==pe.AC.Unspecified&&a){l=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)l.push(e)}return this.readRasters({window:e,interleave:t,samples:l,pool:i,width:r,height:n,resampleMethod:o,signal:s})}let u;switch(c){case pe.ub.WhiteIsZero:case pe.ub.BlackIsZero:case pe.ub.Palette:u=[0];break;case pe.ub.CMYK:u=[0,1,2,3];break;case pe.ub.YCbCr:case pe.ub.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:l,interleave:!0,samples:u,pool:i,width:r,height:n,resampleMethod:o,signal:s},{fileDirectory:f}=this,d=await this.readRasters(h),g=2**this.fileDirectory.BitsPerSample[0];let m;switch(c){case pe.ub.WhiteIsZero:m=function(e,t){const{width:i,height:r}=e,n=new Uint8Array(i*r*3);let o;for(let i=0,r=0;i<e.length;++i,r+=3)o=256-e[i]/t*256,n[r]=o,n[r+1]=o,n[r+2]=o;return n}(d,g);break;case pe.ub.BlackIsZero:m=function(e,t){const{width:i,height:r}=e,n=new Uint8Array(i*r*3);let o;for(let i=0,r=0;i<e.length;++i,r+=3)o=e[i]/t*256,n[r]=o,n[r+1]=o,n[r+2]=o;return n}(d,g);break;case pe.ub.Palette:m=function(e,t){const{width:i,height:r}=e,n=new Uint8Array(i*r*3),o=t.length/3,a=t.length/3*2;for(let i=0,r=0;i<e.length;++i,r+=3){const s=e[i];n[r]=t[s]/65536*256,n[r+1]=t[s+o]/65536*256,n[r+2]=t[s+a]/65536*256}return n}(d,f.ColorMap);break;case pe.ub.CMYK:m=function(e){const{width:t,height:i}=e,r=new Uint8Array(t*i*3);for(let t=0,i=0;t<e.length;t+=4,i+=3){const n=e[t],o=e[t+1],a=e[t+2],s=e[t+3];r[i]=(255-n)/256*255*((255-s)/256),r[i+1]=(255-o)/256*255*((255-s)/256),r[i+2]=(255-a)/256*255*((255-s)/256)}return r}(d);break;case pe.ub.YCbCr:m=function(e){const{width:t,height:i}=e,r=new Uint8ClampedArray(t*i*3);for(let t=0,i=0;t<e.length;t+=3,i+=3){const n=e[t],o=e[t+1],a=e[t+2];r[i]=n+1.402*(a-128),r[i+1]=n-.34414*(o-128)-.71414*(a-128),r[i+2]=n+1.772*(o-128)}return r}(d);break;case pe.ub.CIELab:m=function(e){const{width:t,height:i}=e,r=new Uint8Array(t*i*3);for(let t=0,i=0;t<e.length;t+=3,i+=3){let n,o,a,s=(e[t+0]+16)/116,l=(e[t+1]<<24>>24)/500+s,c=s-(e[t+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),s=1*(s*s*s>.008856?s*s*s:(s-16/116)/7.787),c=1.08883*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),n=3.2406*l+-1.5372*s+-.4986*c,o=-.9689*l+1.8758*s+.0415*c,a=.0557*l+-.204*s+1.057*c,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,r[i]=255*Math.max(0,Math.min(1,n)),r[i+1]=255*Math.max(0,Math.min(1,o)),r[i+2]=255*Math.max(0,Math.min(1,a))}return r}(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(m.length/3),t=new Uint8Array(m.length/3),i=new Uint8Array(m.length/3);for(let r=0,n=0;r<m.length;r+=3,++n)e[n]=m[r],t[n]=m[r+1],i[n]=m[r+2];m=[e,t,i]}return m.width=d.width,m.height=d.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let r=me(i,"Item");r=null===e?r.filter((e=>void 0===ge(e,"sample"))):r.filter((t=>Number(ge(t,"sample"))===e));for(let e=0;e<r.length;++e){const i=r[e];t[ge(i,"name")]=i.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(i)return 0===i[1]&&0===i[4]?[i[0],-i[5],i[10]]:[Math.sqrt(i[0]*i[0]+i[4]*i[4]),-Math.sqrt(i[1]*i[1]+i[5]*i[5]),i[10]];if(e){const[t,i,r]=e.getResolution();return[t*e.getWidth()/this.getWidth(),i*e.getHeight()/this.getHeight(),r*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(e=!1){const t=this.getHeight(),i=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[e,r,n,o,a,s,l,c]=this.fileDirectory.ModelTransformation,u=[[0,0],[0,t],[i,0],[i,t]].map((([t,i])=>[o+e*t+r*i,c+a*t+s*i])),h=u.map((e=>e[0])),f=u.map((e=>e[1]));return[Math.min(...h),Math.min(...f),Math.max(...h),Math.max(...f)]}{const e=this.getOrigin(),r=this.getResolution(),n=e[0],o=e[1],a=n+r[0]*i,s=o+r[1]*t;return[Math.min(n,a),Math.min(o,s),Math.max(n,a),Math.max(o,s)]}}};class De{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const i=this.getUint32(e,t),r=this.getUint32(e+4,t);let n;if(t){if(n=i+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*i+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}getInt64(e,t){let i=0;const r=(128&this._dataView.getUint8(e+(t?7:0)))>0;let n=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));r&&(n?0!==a&&(a=255&~(a-1),n=!1):a=255&~a),i+=a*256**o}return r&&(i=-i),i}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return de(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Ie{constructor(e,t,i,r){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=i,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),i=this.readUint32(e+4);let r;if(this._littleEndian){if(r=t+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*t+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let t=0;const i=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let r=!0;for(let n=0;n<8;n++){let o=this._dataView.getUint8(e+(this._littleEndian?n:7-n));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),t+=o*256**n}return i&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}class Ce{async fetch(e,t=void 0){return Promise.all(e.map((e=>this.fetchSlice(e,t))))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Me extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Me),this.name="AbortError"}}Error;class Pe extends Ce{constructor(e){super(),this.arrayBuffer=e}fetchSlice(e,t){if(t&&t.aborted)throw new Me("Request aborted");return this.arrayBuffer.slice(e.offset,e.offset+e.length)}}function Ee(e){switch(e){case pe.s$.BYTE:case pe.s$.ASCII:case pe.s$.SBYTE:case pe.s$.UNDEFINED:return 1;case pe.s$.SHORT:case pe.s$.SSHORT:return 2;case pe.s$.LONG:case pe.s$.SLONG:case pe.s$.FLOAT:case pe.s$.IFD:return 4;case pe.s$.RATIONAL:case pe.s$.SRATIONAL:case pe.s$.DOUBLE:case pe.s$.LONG8:case pe.s$.SLONG8:case pe.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function Ae(e,t,i,r){let n=null,o=null;const a=Ee(t);switch(t){case pe.s$.BYTE:case pe.s$.ASCII:case pe.s$.UNDEFINED:n=new Uint8Array(i),o=e.readUint8;break;case pe.s$.SBYTE:n=new Int8Array(i),o=e.readInt8;break;case pe.s$.SHORT:n=new Uint16Array(i),o=e.readUint16;break;case pe.s$.SSHORT:n=new Int16Array(i),o=e.readInt16;break;case pe.s$.LONG:case pe.s$.IFD:n=new Uint32Array(i),o=e.readUint32;break;case pe.s$.SLONG:n=new Int32Array(i),o=e.readInt32;break;case pe.s$.LONG8:case pe.s$.IFD8:n=new Array(i),o=e.readUint64;break;case pe.s$.SLONG8:n=new Array(i),o=e.readInt64;break;case pe.s$.RATIONAL:n=new Uint32Array(2*i),o=e.readUint32;break;case pe.s$.SRATIONAL:n=new Int32Array(2*i),o=e.readInt32;break;case pe.s$.FLOAT:n=new Float32Array(i),o=e.readFloat32;break;case pe.s$.DOUBLE:n=new Float64Array(i),o=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==pe.s$.RATIONAL&&t!==pe.s$.SRATIONAL)for(let t=0;t<i;++t)n[t]=o.call(e,r+t*a);else for(let t=0;t<i;t+=2)n[t]=o.call(e,r+t*a),n[t+1]=o.call(e,r+(t*a+4));return t===pe.s$.ASCII?new TextDecoder("utf-8").decode(n):n}class Ge{constructor(e,t,i){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=i}}class Re extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class Oe{async readRasters(e={}){const{window:t,width:i,height:r}=e;let{resX:n,resY:o,bbox:a}=e;const s=await this.getImage();let l=s;const c=await this.getImageCount(),u=s.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(i||r){if(t){const[e,i]=s.getOrigin(),[r,n]=s.getResolution();a=[e+t[0]*r,i+t[1]*n,e+t[2]*r,i+t[3]*n]}const e=a||u;if(i){if(n)throw new Error("Both width and resX passed");n=(e[2]-e[0])/i}if(r){if(o)throw new Error("Both width and resY passed");o=(e[3]-e[1])/r}}if(n||o){const e=[];for(let t=0;t<c;++t){const i=await this.getImage(t),{SubfileType:r,NewSubfileType:n}=i.fileDirectory;(0===t||2===r||1&n)&&e.push(i)}e.sort(((e,t)=>e.getWidth()-t.getWidth()));for(let t=0;t<e.length;++t){const i=e[t],r=(u[2]-u[0])/i.getWidth(),a=(u[3]-u[1])/i.getHeight();if(l=i,n&&n>r||o&&o>a)break}}let h=t;if(a){const[e,t]=s.getOrigin(),[i,r]=l.getResolution(s);h=[Math.round((a[0]-e)/i),Math.round((a[1]-t)/r),Math.round((a[2]-e)/i),Math.round((a[3]-t)/r)],h=[Math.min(h[0],h[2]),Math.min(h[1],h[3]),Math.max(h[0],h[2]),Math.max(h[1],h[3])]}return l.readRasters({...e,window:h})}}class Le extends Oe{constructor(e,t,i,r,n={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=i,this.firstIFDOffset=r,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const i=this.bigTiff?4048:1024;return new Ie((await this.source.fetch([{offset:e,length:void 0!==t?t:i}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,i=this.bigTiff?8:2;let r=await this.getSlice(e);const n=this.bigTiff?r.readUint64(e):r.readUint16(e),o=n*t+(this.bigTiff?16:6);r.covers(e,o)||(r=await this.getSlice(e,o));const a={};let s=e+(this.bigTiff?8:2);for(let e=0;e<n;s+=t,++e){const e=r.readUint16(s),t=r.readUint16(s+2),i=this.bigTiff?r.readUint64(s+4):r.readUint32(s+4);let n,o;const l=Ee(t),c=s+(this.bigTiff?12:8);if(l*i<=(this.bigTiff?8:4))n=Ae(r,t,i,c);else{const e=r.readOffset(c),o=Ee(t)*i;n=r.covers(e,o)?Ae(r,t,i,e):Ae(await this.getSlice(e,o),t,i,e)}o=1===i&&-1===pe.NZ.indexOf(e)&&t!==pe.s$.RATIONAL&&t!==pe.s$.SRATIONAL?n[0]:n,a[pe.$[e]]=o}const l=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const i={};for(let r=4;r<=4*t[3];r+=4){const n=pe.Hm[t[r]],o=t[r+1]?pe.$[t[r+1]]:null,a=t[r+2],s=t[r+3];let l=null;if(o){if(l=e[o],null==l)throw new Error(`Could not get value of geoKey '${n}'.`);"string"==typeof l?l=l.substring(s,s+a-1):l.subarray&&(l=l.subarray(s,s+a),1===a&&(l=l[0]))}else l=s;i[n]=l}return i}(a),c=r.readOffset(e+i+t*n);return new Ge(a,l,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof Re)throw new Re(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new Re(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new ve(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof Re))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;let t=await this.getSlice(e,130);if("GDAL_STRUCTURAL_METADATA_SIZE="===Ae(t,pe.s$.ASCII,30,e)){const i=Ae(t,pe.s$.ASCII,130,e).split("\n")[0],r=Number(i.split("=")[1].split(" ")[0])+i.length;r>130&&(t=await this.getSlice(e,r));const n=Ae(t,pe.s$.ASCII,r,e);this.ghostValues={},n.split("\n").filter((e=>e.length>0)).map((e=>e.split("="))).forEach((([e,t])=>{this.ghostValues[e]=t}))}return this.ghostValues}static async fromSource(e,t,i){const r=(await e.fetch([{offset:0,length:1024}],i))[0],n=new De(r),o=n.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const s=n.getUint16(2,a);let l;if(42===s)l=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");if(l=!0,8!==n.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const c=l?n.getUint64(8,a):n.getUint32(4,a);return new Le(e,a,l,c,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}const Ue=function(e,t,i){this.noDataValue=e.noDataValue,this.view=t,this.commutingProvidersReady=!1,this.commutingProvidersPromises=cesium.when.defer(),this.surfaceHasTilesToRender=cesium.when.defer(),this.surfaceTilesToRender=0,this.fallback=i.fallback||[],this.fallbackProvider=[],this.fallbackProvider=this.fallback.map((function(e,i){return"WMTS"===e.type||!e.type&&e.url.indexOf("WMTS")>=0?new cesium.WMTSTerrainProvider(e,t):"WCS"===e.type||!e.type&&e.url.indexOf("WCS")>=0?new cesium.WCSTerrainProvider(e,t):new cesium.CesiumTerrainProvider(e,t)})),this.defaultFallbackProvider=new cesium.EllipsoidTerrainProvider,this.attributions={},e.attributions&&(this.attributions=e.attributions,this.view.map.trigger(SITNA.Consts.event.TERRAINPROVIDERADD,{terrainProvider:this})),e.url instanceof cesium.Resource||(e.url=new cesium.Resource({url:e.url.trim()})),cesium.CesiumTerrainProvider.call(this,e),this.boundaries=Array.isArray(i.boundaries)?i.boundaries:[i.boundaries],cesium.when.all([...this.fallbackProvider.map((e=>e.readyPromise)),this._readyPromise.promise,this.surfaceHasTilesToRender.promise],function(){this.commutingProvidersReady=!0,this.commutingProvidersPromises.resolve()}.bind(this))};!function(){(Ue.prototype=Object.create(cesium.CesiumTerrainProvider.prototype,{fallback:{value:null,enumerable:!0,configurable:!0,writable:!0},fallbackProvider:{value:null,enumerable:!0,configurable:!0,writable:!0},defaultFallbackProvider:{value:null,enumerable:!0,configurable:!0,writable:!0},allReady:{get:function(){return this.commutingProvidersReady}},allReadyPromise:{get:function(){return this.commutingProvidersPromises}}})).constructor=Ue,Ue.prototype.isPointInDefaultBoundaries=function(e){var t=this;return!t.boundaries.length||t.isPointInBoundaries(e,t.boundaries[0])},Ue.prototype.isInDefaultBoundaries=function(e,t,i){var r=this;return!r.boundaries.length||r.isInBoundaries(e,t,i,r.boundaries[0])},Ue.prototype.isPointInBoundaries=function(e,t){return t.some((t=>function(e,t){for(var i,r,n=e.length,o=e[n-1],a=t[0],s=t[1],l=o[0],c=o[1],u=!1,h=0;h<n;++h)i=(o=e[h])[0],(r=o[1])>s!=c>s&&a<(l-i)*(s-r)/(c-r)+i&&(u=!u),l=i,c=r;return u}(t,[cesium.Math.toDegrees(e.longitude),cesium.Math.toDegrees(e.latitude)])))},Ue.prototype.isInBoundaries=function(e,t,i,r){var n=[],o=this.tilingScheme.tileXYToRectangle(e,t,i);n.push(new cesium.Cartographic(o.west,o.south)),n.push(new cesium.Cartographic(o.west,o.north)),n.push(new cesium.Cartographic(o.east,o.south)),n.push(new cesium.Cartographic(o.east,o.north));for(var a=0;a<n.length;a++)if(!this.isPointInBoundaries(n[a],r))return!1;return!0},Ue.prototype.getTileDataAvailable=function(e,t,i){return this.surfaceTilesToRender>5&&this.surfaceHasTilesToRender.resolve(),this.surfaceTilesToRender++,!(i>this._availability._maximumLevel&&this.isInDefaultBoundaries(e,t,i))},Ue.prototype.getAttribution=function(){return this.attributions},Ue.prototype.requestTileGeometry=function(e,t,i){const r=this;let n=cesium.when.defer();const o=function(e){r.view.map.trigger(SITNA.Consts.event.TERRAINPROVIDERADD,{terrainProvider:e})},a=function(){if(r.fallbackProvider){const a=r.fallbackProvider.filter((e=>e.ready)).find(((n,o,a)=>1===a.length||o+1===r.boundaries.length||r.isInBoundaries(e,t,i,r.boundaries[o+1])));a?a.requestTileGeometry.apply(a,[e,t,i]).then((function(s){s._minimumHeight&&r.fallback[r.fallbackProvider.indexOf(a)]&&s._minimumHeight===r.fallback[r.fallbackProvider.indexOf(a)].noDataValue?n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i])):(o(a),n.resolve(s))})).otherwise((function(){n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i]))})):n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i]))}else n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i]))};return i>this._availability._maximumLevel?a():this.isInDefaultBoundaries(e,t,i)?cesium.CesiumTerrainProvider.prototype.requestTileGeometry.apply(r,[e,t,i]).then(function(a,s){s._minimumHeight===r.noDataValue?r.fallbackProvider&&r.fallbackProvider[0].ready?r.fallbackProvider[0].requestTileGeometry.apply(r,a).then((function(e){o(r.fallbackProvider[0]),n.resolve(e)})).otherwise((function(){n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i]))})):n.resolve(r.defaultFallbackProvider.requestTileGeometry([e,t,i])):(o(r),n.resolve(s))}.bind(this,arguments)).otherwise(a):a(),n.then((function(e){return e}))},Ue.prototype.sampleTerrainMostDetailed=function(e){var t=cesium.Rectangle.fromCartographicArray(e);return 0===[cesium.Rectangle.center(t),cesium.Rectangle.northeast(t),cesium.Rectangle.northwest(t),cesium.Rectangle.southeast(t),cesium.Rectangle.southwest(t)].filter(async function(e){return await!this.isPointInDefaultBoundaries(e)}.bind(this)).length?cesium.sampleTerrainMostDetailed(this,e):this.fallbackProvider[0].sampleTerrainMostDetailed(e)},cesium.MergeTerrainProvider=Ue;const e=function(e,t){this.view=t;var i=cesium.when.defer();if(this._ready=!1,this._readyPromise=i,!cesium.defined(e))throw new cesium.DeveloperError("description is required.");this.description=e,this.url=e.url,this.layerName=e.layerName;var r=new cesium.Event;this._eventHelper=new cesium.EventHelper;var o=e.credit;if("string"==typeof o&&(o=new cesium.Credit(o)),this.tileCacheService=new l(this.type+"Tiles"),this.tileCacheService.createDB(),this.lastTile=void 0,this.ready=!1,this.DefaultProvider=new cesium.EllipsoidTerrainProvider,Object.defineProperties(this,{errorEvent:{get:function(){return r}},credit:{get:function(){return o}},hasVertexNormals:{get:function(){return!1}},readyPromise:{get:function(){return this._readyPromise.promise}}}),this._heightmapWidth=65,this.noDataValue=e.noDataValue,this.urlofServer,cesium.defined(this.url)){this.urlofServer=this.url;var a=this.urlofServer.lastIndexOf("?");a>-1&&(this.urlofServer=this.urlofServer.substring(0,a))}n.apply(this,[this.getCapabilities()]),this.OGCHelper.CRS=[{name:"CRS:84",ellipsoid:cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:cesium.GeographicTilingScheme,SupportedCRS:["urn:ogc:def:crs:OGC:2:84"]},{name:"EPSG:4258",ellipsoid:cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:cesium.GeographicTilingScheme,SupportedCRS:["urn:ogc:def:crs:EPSG::4258","EPSG:4258","IGNF:WGS84G"]},{name:"EPSG:4326",ellipsoid:cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!0,tilingScheme:cesium.GeographicTilingScheme,SupportedCRS:["urn:ogc:def:crs:EPSG::4326","EPSG:4326"]},{name:"EPSG:3857",ellipsoid:cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:cesium.WebMercatorTilingScheme,SupportedCRS:["urn:ogc:def:crs:EPSG::3857","EPSG:3857"]},{name:"OSGEO:41001",ellipsoid:cesium.Ellipsoid.WGS84,firstAxeIsLatitude:!1,tilingScheme:cesium.WebMercatorTilingScheme,SupportedCRS:["urn:ogc:def:crs:EPSG::3857"]}],this.OGCHelper.FormatImage=[{format:"image/png",extension:"png"},{format:"image/jpeg",extension:"jpg"},{format:"image/jpeg",extension:"jpeg"},{format:"image/gif",extension:"gif"},{format:"image/png; mode=8bit",extension:"png"},{format:"image/tiff",extension:"tiff"},{format:"image/tiff",extension:"geotiff"},{format:"image/tiff",extension:"geotiffint16"},{format:"image/tiff",extension:"geotiff_rgb"},{format:"image/x-bil;bits=32",extension:"x-bil"}],this.format=this.OGCHelper.FormatImage.find((t=>t.extension===e.format.toLowerCase())).format};e.prototype.getAttribution=function(){return this.attributions},e.prototype.OGCHelper={},e.TiledError=function(){console.log("TiledError")},e.prototype.ImageToHeightmapTerrainData=async function(e,t,i,n,o){return"image/tiff"===this.format?await this.GeotiffToHeightmapTerrainData(e,i,n,o):await r(e,{offset:0,lowest:0,highest:3700},t,!0)},e.prototype.GeotiffToHeightmapTerrainData=function(e,t,i,r){return new Promise((t=>{cesium.createTaskProcessorWorker((async()=>{const i=await async function(e,t){return Le.fromSource(function(e){return new Pe(e)}(e),t)}(e),r=await i.getImage();t((await r.readRasters())[0])}))({data:{}})}))},e.prototype.HeightmapTerrainData=function(e,t,i){if("number"==typeof t&&(t={width:t,height:t}),!cesium.defined(e))throw new cesium.DeveloperError("no good size");var r={buffer:e,width:t.width,height:t.height,childTileMask:i};return new cesium.HeightmapTerrainData(r)};const t=function(t,i){this.parse=function(e){var t,i=this;if(e=cesium.defaultValue(e,cesium.defaultValue.EMPTY_OBJECT),cesium.defined(e.url)){var r=e.url,n=r.lastIndexOf("?");if(n>-1&&(r=r.substring(0,n)),!cesium.defined(e.layerName))throw new cesium.DeveloperError("description.layerName is required.");var o=r+"?SERVICE=WCS&VERSION=1.0.0&request=DescribeCoverage&Coverage="+e.layerName;cesium.defined(e.proxy)&&(o=e.proxy.getURL(o)),t=cesium.when(cesium.Resource.fetchXML({url:o}),(function(t){return i.getDescribeCoverage(t,e)})).otherwise((function(){return cesium.when.defer.resolve(null)}))}else{if(!cesium.defined(e.xml))throw new cesium.DeveloperError("either description.url or description.xml are required.");t=i.getDescribeCoverage(e.xml,e)}return t.type="WCS",t},this.getDescribeCoverage=function(e,t){var i={};const r=this;if(!cesium.defined(t.layerName))throw new cesium.DeveloperError("description.layerName is required.");i.minLevel=cesium.defaultValue(t.minLevel,void 0),i.maxLevel=cesium.defaultValue(t.maxLevel,void 0),i.heightMapWidth=cesium.defaultValue(t.heightMapWidth,65),i.heightMapHeight=cesium.defaultValue(t.heightMapHeight,i.heightMapWidth);const n=Array.from(e.querySelectorAll("lonLatEnvelope pos")).map((e=>e.innerHTML.split(" "))),o=n[0],a=n[1];i.upperCorner=a,i.lowerCorner=o,c(e.querySelector("gml\\:low, low").textContent.split(" ")),c(e.querySelector("gml\\:high, high").textContent.split(" "));var s="EPSG:"+4326..toString(),l=this.OGCHelper.CRS.filter((function(e){return e.name===s}));l.length>0?i.tilingScheme=new l[0].tilingScheme({ellipsoid:l[0].ellipsoid}):i.tilingScheme=void 0,i.pixelSize=[65,65],i.levelZeroMaximumGeometricError=cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(i.tilingScheme._ellipsoid,Math.min(i.heightMapWidth,i.heightMapHeight),i.tilingScheme.getNumberOfXTilesAtLevel(0)),i.waterMask=!1,i.ready=!0;var u={WKID:4326,EPSG:s,coord:[[o[0],a[1]],[o[0],o[1]],[a[0],o[1]],[a[0],a[1]]],ulidx:0,llidx:1,lridx:2,uridx:3};i.bbox=u,i.getTileDataAvailable=function(e,t,r){return!!(r<=i.maxLevel&&i.isInTile(e,t,r))},this.urlofServer=t.url;var h=this.urlofServer.lastIndexOf("?");h>-1&&(this.urlofServer=this.urlofServer.substring(0,h));var f=this.urlofServer+"?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE="+t.layerName+"&FORMAT={format}&BBOX={west},{south},{east},{north}&WIDTH=65&HEIGHT=65&CRS=EPSG:4326";return i.urlGetTerrain=f,i.isTileInside=function(e,t,n){var o=!0,a=i.bbox,s=r.tilingScheme.tileXYToNativeRectangle(e,t,n);return(a.coord[a.ulidx][0]>=s.east||a.coord[a.lridx][0]<=s.west||a.coord[a.lridx][1]>=s.north||a.coord[a.ulidx][1]<=s.south)&&(o=!1),o},i.isInTile=function(e,t,r){var n=!1,o=i.bbox,a=i.tilingScheme.tileXYToNativeRectangle(e,t,r);return(o.coord[o.ulidx][0]>=a.west&&o.coord[o.ulidx][0]<=a.east&&o.coord[o.ulidx][1]>=a.south&&o.coord[o.ulidx][1]<=a.north||o.coord[o.uridx][0]>=a.west&&o.coord[o.uridx][0]<=a.east&&o.coord[o.uridx][1]>=a.south&&o.coord[o.uridx][1]<=a.north||o.coord[o.llidx][0]>=a.west&&o.coord[o.llidx][0]<=a.east&&o.coord[o.llidx][1]>=a.south&&o.coord[o.llidx][1]<=a.north||o.coord[o.lridx][0]>=a.west&&o.coord[o.lridx][0]<=a.east&&o.coord[o.lridx][1]>=a.south&&o.coord[o.lridx][1]<=a.north||o.coord[o.ulidx][0]<a.east&&o.coord[o.lridx][0]>a.west&&o.coord[o.lridx][1]<a.north&&o.coord[o.ulidx][1]>a.south)&&(n=!0),n},i.templateToURL=function(e,t,n){var o=r.tilingScheme.tileXYToNativeRectangle(e,t,n),a=(o.east-o.west)/(r.heightMapWidth-1),s=(o.north-o.south)/(r.heightMapHeight-1);return o.west-=.5*a,o.east+=.5*a,o.south-=.5*s,o.north+=.5*s,i.urlGetTerrain.replace("{south}",o.south).replace("{north}",o.north).replace("{west}",o.west).replace("{east}",o.east).replace("{format}",r.format)},i},this.type="WCS",e.apply(this,[t,i])};(t.prototype=Object.create(e.prototype)).constructor=t,t.prototype.getCapabilities=function(){var e=this.urlofServer+"?SERVICE=WCS&VERSION=1.0.0&request=GetCapabilities";return cesium.when(cesium.Resource.fetchXML({url:e}),function(e){if(e.querySelector("Service")){this.attributions={};var t=e.querySelector("Service").querySelector("label");t&&(this.attributions.name=t.textContent.trim());var i=e.querySelector("Service").querySelector("metadataLink");i&&(this.attributions.site=i.getAttribute("about"))}}.bind(this)),this.description=cesium.defaultValue(this.description,cesium.defaultValue.EMPTY_OBJECT),this.parse.apply(this,[this.description])};var i=function(t,i){this._parse=function(e){var t,i=this;if(e=cesium.defaultValue(e,cesium.defaultValue.EMPTY_OBJECT),cesium.defined(e.url)){var r=e.url,n=r.lastIndexOf("?");if(n>-1&&(r=r.substring(0,n)),!cesium.defined(e.layerName))throw new cesium.DeveloperError("description.layerName is required.");var o=r+"?SERVICE=WCS&VERSION=1.0.0&request=DescribeCoverage&CoverageId="+e.layerName;cesium.defined(e.proxy)&&(o=e.proxy.getURL(o)),t=cesium.when(cesium.Resource.fetchXML({url:o}),(function(t){return i.getDescribeCoverage(t,e)})).otherwise((function(){return cesium.when.defer.resolve(null)}))}else{if(!cesium.defined(e.xml))throw new cesium.DeveloperError("either description.url or description.xml are required.");t=i.getDescribeCoverage(e.xml,e)}return t.type="WMTS",t},this.parse=function(e,t){const i=this,r=t.maxLevel||20,n=t.layerName;let o=t.styleName,a=null,s=[],l=null,c=null,u=null;const h=t.proxy,f=i.OGCHelper.generate(t);Array.from(e.querySelectorAll('Operation[name="GetTile"] HTTP Get')).map((e=>({node:e,type:e.querySelector("Value").textContent}))).forEach((e=>{"RESTful"===e.type&&null===c&&(c=e.node.getAttribute("xlink:href"),h&&(c=h.getURL(c))),"KVP"===e.type&&null===l&&(l=e.node.getAttribute("xlink:href"),h&&(l=h.getURL(l)))}));const d=e.querySelectorAll("Contents>Layer>Identifier");let g=null;for(let e=0;e<d.length&&null===g;e++)n===d[e].textContent&&(g=d[e].parentNode);if(null!==g){let e,t;Array.from(g.querySelectorAll("Style")).forEach((i=>{const r=i.querySelector("Identifier").textContent;null!=i.getAttribute("isDefault")&&(e=r),r===o&&(t=r)})),o&&o===t||(o=e||"");const r=Array.from(g.querySelectorAll("Format"));for(let e=0;e<i.OGCHelper.FormatImage.length&&null===u;e++)r.filter((t=>t.textContent===i.OGCHelper.FormatImage[e].format&&t.textContent===i.format)).length>0&&(u=i.OGCHelper.FormatImage[e]);if(!u)throw new cesium.DeveloperError("image format not valid.");s=Array.from(g.querySelectorAll("TileMatrixSetLink"))}const m=Array.from(e.querySelectorAll("TileMatrixSet>Identifier"));for(let e=0;e<s.length&&!f.ready;e++){const t=s[e],c=t.querySelector("TileMatrixSet").textContent;let h=null,d=null;for(let e=0;e<m.length&&null===h;e++)m[e].textContent===c&&(h=m[e].parentNode);const y=h.querySelector("SupportedCRS").textContent;for(let e=0;e<i.OGCHelper.CRS.length&&null===d;e++)i.OGCHelper.CRS[e].SupportedCRS.includes(y)&&(d=i.OGCHelper.CRS[e]);if(null!==d){const e=Array.from(h.querySelectorAll("TileMatrix")).map((function(e){let t=e.querySelector("Identifier").textContent,i=parseInt(e.querySelector("MatrixWidth").textContent,10),r=parseInt(e.querySelector("MatrixHeight").textContent,10),n=parseInt(e.querySelector("TileWidth").textContent,10),o=parseInt(e.querySelector("TileHeight").textContent,10);return{id:t,maxWidth:i,maxHeight:r,scaleDenominator:parseFloat(e.querySelector("ScaleDenominator").textContent),complete:!1,tileWidth:n,tileHeight:o}})).sort(((e,t)=>t.scaleDenominator-e.scaleDenominator)),s=Array.from(t.querySelectorAll("TileMatrixSetLimits>TileMatrixLimits")).map((e=>({id:e.querySelector("TileMatrix").textContent,bbox:{minTileRow:parseInt(e.querySelector("MinTileRow").textContent,10),maxTileRow:parseInt(e.querySelector("MaxTileRow").textContent,10),minTileCol:parseInt(e.querySelector("MinTileCol").textContent,10),maxTileCol:parseInt(e.querySelector("MaxTileCol").textContent,10)}})));if(e.forEach((e=>{s.forEach((t=>{e.id===t.id&&(e.bbox=t.bbox,e.complete=!0)}))})),e.length>0){var p=this.OGCHelper.CRS.filter((function(e){return e.name===y}));p.length>0?f.tilingScheme=new p[0].tilingScheme({ellipsoid:p[0].ellipsoid}):f.tilingScheme=void 0;const t=g.querySelector("ResourceURL[format='"+u.format+"']");if(null!==t?a=t.getAttribute("template").replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{style}",o).replace("{Style}",o).replace("{TileMatrixSet}",c).replace("{layer}",n).replace("{infoFormatExtension}",u.extension):null!==l&&(a=l+"?service=WMTS&request=GetTile&version=1.0.0&layer="+n+"&style="+o+"&format="+u.format+"&TileMatrixSet="+c+"&TileMatrix={TileMatrix}&TileRow={y}&TileCol={x}"),null!==a){f.minLevel=e.length,f.maxLevel=0,f.isTileInside=function(e,t,i){return!0},f.getTileDataAvailable=(t,i,n)=>{let o=!1;if(n<r&&n<e.length){const r=e[n],a=r.bbox;o=r.complete?i<=a.maxTileRow&&i>=a.minTileRow&&t<=a.maxTileCol&&t>=a.minTileCol:t<r.maxWidth&&i<r.maxHeight}return o},f.templateToURL=function(t,r,n){let o="";if(i.getTileDataAvailable(t,r,n)){let i=e[n];o=a.replace("{TileMatrix}",i.id).replace("{x}",t).replace("{y}",r)}return o};const t={width:e[0].tileWidth,height:e[0].tileHeight};0===e.filter((e=>e.tileWidth!=t.width||e.tileHeight!=t.height)).length&&(f.imageSize=t),f.heightMapWidth=cesium.defaultValue(t.width,256),f.heightMapHeight=cesium.defaultValue(t.widht,256),f.urlGetTile=a,f.ready=!0}}}}return f},this.type="WMTS",e.apply(this,[t,i])};(i.prototype=Object.create(e.prototype)).constructor=i,i._super=e.prototype,i.prototype.getCapabilities=function(){const e=this;var t=e.urlofServer+"?SERVICE=WMTS&request=GetCapabilities";cesium.defined(e.description.proxy)&&(t=e.description.proxy.getURL(t)),this.description=cesium.defaultValue(e.description,cesium.defaultValue.EMPTY_OBJECT);const i=cesium.when.defer();return cesium.when(cesium.Resource.fetchXML({url:t}),function(t){if(this.attributions={},t.querySelector("ServiceIdentification")){var r=t.querySelector("ServiceIdentification").querySelector("Title");r&&(this.attributions.name=r.textContent.trim())}if(t.querySelector("ServiceProvider")){var n=t.querySelector("ServiceProvider").querySelector("ProviderSite");n&&(this.attributions.site=n.getAttribute("href"))}i.resolve(this.parse.apply(this,[t,e.description]))}.bind(this)),i},i.prototype.OGCHelper.generate=function(e){var t={};return t.heightMapWidth=e.heightMapWidth,t.heightMapHeight=e.heightMapHeight,t.ready=!1,t.maximumLevel=e.maxLevel,t.levelZeroMaximumGeometricError=void 0,t.offset=e.offset,t.highest=e.highest,t.lowest=e.lowest,t.hasStyledImage=e.hasStyledImage||"string"==typeof e.styleName,t.type="WMTS",t};const r=function(e,t,i,r){const n=cesium.getImagePixels(e,i.width,i.height),o=new Float32Array(n.length/4);for(let e=0;e<n.length;e+=4){const i=n[e];o[e/4]=i/255*(t.highest-t.lowest)+t.offset}return o};function n(e){const t=this;cesium.when(e,(function(e){if(cesium.defined(e)&&e.ready){if(t._ready=!0,t._readyPromise.resolve(!0),e.getHeightmapTerrainData=function(i,r,n){var o;if(!Number.isNaN(i+r+n)){const s=e.templateToURL(i,r,n);var a=0;if(n<e.minLevel&&(a|=1,a|=2,a|=4,a|=8),null!=t.lastTile&&t.lastTile.x==i&&t.lastTile.y==r&&t.lastTile.level==n)return t.lastTile.value;o=cesium.when(t.tileCacheService.getTileData(i,r,n),(function(e){let o=t.HeightmapTerrainData(e.data,{width:t.heightMapHeight,height:t.heightMapHeight},a);return t.lastTile={x:i,y:r,level:n,value:o},o})).otherwise((function(e){const o="image/tiff"===t.format?cesium.Resource.fetchArrayBuffer:cesium.Resource.fetchImage;return cesium.when(o({url:s}),(function(e){return cesium.when(t.ImageToHeightmapTerrainData(e,{width:t.heightMapHeight,height:t.heightMapHeight},i,r,n),(function(e){t.tileCacheService.addTile(i,r,n,e);let o=t.HeightmapTerrainData(e,{width:t.heightMapHeight,height:t.heightMapHeight},a);return t.lastTile={x:i,y:r,level:n,value:o},o}))})).otherwise((function(){return t.DefaultProvider.requestTileGeometry(i,r,n)}))}))}return o},t.getLevelMaximumGeometricError=function(t){return e.levelZeroMaximumGeometricError/(1<<t)},t.requestTileGeometry=function(i,r,n){var o;if(cesium.defined(e.getHeightmapTerrainData))if(n<=e.minLevel&&n>=e.maxLevel){if(t.description.constraints&&t.description.constraints.meterPerPixel){const e=t.tilingScheme.tileXYToNativeRectangle(i,r,n);if(function(e,t,i,r){const n=TC.Util.degToRad(e),o=TC.Util.degToRad(i),a=TC.Util.degToRad(i-e),s=TC.Util.degToRad(r-t),l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n)*Math.cos(o)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3}(e.south,e.west,e.north,e.west)/65>t.description.constraints.meterPerPixel)return cesium.when.defer().reject()}o=1==e.isTileInside(i,r,n)?e.getHeightmapTerrainData(i,r,n):cesium.when.defer().reject()}else o=cesium.when.defer().reject();else o=cesium.when.defer().reject();return o},Object.defineProperties(t,{tilingScheme:{get:function(){return e.tilingScheme}},ready:{get:function(){return e.ready}},pixelSize:{get:function(){return e.pixelSize}},hasWaterMask:{get:function(){return e.waterMask}},heightMapHeight:{get:function(){return e.heightMapHeight}},heightMapWidth:{get:function(){return e.heightMapWidth}},getTileDataAvailable:{get:function(){return e.getTileDataAvailable}},minLevel:{get:function(){return e.minLevel}},maxLevel:{get:function(){return e.maxLevel}}}),null==e.minLevel||null==e.maxLevel){var i=e.bbox;new cesium.Cartographic(cesium.Math.toRadians(i.coord[i.ulidx][0]),cesium.Math.toRadians(i.coord[i.ulidx][1]),0),e.minLevel=30,e.maxLevel=0;for(var r=0;r<30;r++){var n=t.tilingScheme.tileXYToNativeRectangle(0,0,r),o=(n.east-n.west)/(t.heightMapWidth-1),a=(n.north-n.south)/(t.heightMapHeight-1),s=t.pixelSize[0]/o,l=t.pixelSize[1]/a;s<10&&s>.1&&Math.abs(l)<10&&Math.abs(l)>.1&&(r<e.minLevel&&(e.minLevel=r),r>e.maxLevel&&(e.maxLevel=r))}}}else console.log("Error al obtener terreno fuera de Navarra")}))}function o(e,t,i){var r,n=e.tilingScheme,o=[],l={};for(r=0;r<i.length;++r){var c=n.positionToTileXY(i[r],t),u=c.toString();if(!Object.prototype.hasOwnProperty.call(l,u)){var h={x:c.x,y:c.y,level:t,tilingScheme:n,terrainProvider:e,positions:[]};l[u]=h,o.push(h)}l[u].positions.push(i[r])}var f=[];for(r=0;r<o.length;++r){var d=o[r],g=d.terrainProvider.requestTileGeometry(d.x,d.y,d.level,!1),m=cesium.when(g,a(d),s(d));f.push(m)}return cesium.when.all(f,(function(){return i}))}function a(e){var t=e.positions,i=e.tilingScheme.tileXYToRectangle(e.x,e.y,e.level);return function(e){for(var r=0;r<t.length;++r){var n=t[r];n.height=e.interpolateHeight(i,n.longitude,n.latitude)}}}function s(e){var t=e.positions;return function(){for(var e=0;e<t.length;++e)t[e].height=void 0}}function l(e){this.database=null,this.objectStoreName=e}function c(e){for(var t=0;t<e.length;t++){var i=parseFloat(e[t]);Number.isNaN(i)||(e[t]=i)}return e}t.prototype.sampleTerrainMostDetailed=function(e){var t=this,i=cesium.when.defer();return function r(){t.ready?cesium.when(o(t,16,e),(function(e){i.resolve(e)})):setTimeout(r,10)}(),i},i.prototype.sampleTerrainMostDetailed=function(e){var t=this,i=cesium.when.defer();return function r(){t.ready?cesium.when(o(t,16,e),(function(e){i.resolve(e)})):setTimeout(r,10)}(),i},cesium.WCSTerrainProvider=t,cesium.WMTSTerrainProvider=i,l.prototype={createDB:function(){window.indexedDB||(window.indexedDB=window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),window.IDBTransaction||(window.IDBTransaction=window.webkitIDBTransaction||window.msIDBTransaction),window.IDBKeyRange||(window.IDBKeyRange=window.webkitIDBKeyRange||window.msIDBKeyRange),window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");var e=window.indexedDB.open("TileCacheService",1),t=this;e.onsuccess=function(e){t.database=e.target.result},e.onerror=function(e){console.log("IndexedDB--\x3e onerror ")},e.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("WCSTiles")||t.createObjectStore("WCSTiles",{keyPath:"id"}).createIndex("tile",["level","row","column"],{unique:!0}),t.objectStoreNames.contains("WMTSTiles")||t.createObjectStore("WMTSTiles",{keyPath:"id"}).createIndex("tile",["level","row","column"],{unique:!0}),t.objectStoreNames.contains("ImageTiles")||t.createObjectStore("ImageTiles",{keyPath:"id"}).createIndex("tile",["level","row","column"],{unique:!0})}},info:function(){window.webkitStorageInfo.queryUsageAndQuota(window.TEMPORARY,(function(e,t){console.log("Used quota: "+e+", remaining quota: "+t)}),(function(e){console.log("Error",e)}))},isReady:function(){return!!this.database&&this.database.objectStoreNames.contains(this.objectStoreName)},getTileData:function(e,t,i){var r=cesium.when.defer();if(this.database){var n=this.database.transaction(this.objectStoreName).objectStore(this.objectStoreName).index("tile").get([i,t,e]);n.onsuccess=function(e){var t=null;e.target.result?(t={data:e.target.result.tileData},r.resolve(t)):r.reject("no tile")},n.onerror=function(e){r.reject("no tile get failed")}}else console.log("getTileData no database",this.database),r.reject("no IndexedDB");return r.promise},addTile:function(e,t,i,r){if(this.database){var n=this.database.transaction(this.objectStoreName,"readwrite");try{var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));n.objectStore(this.objectStoreName).add({id:o,level:i,row:t,column:e,tileData:r})}catch(e){console.log(e)}}else console.log("addTile no database")}}}();const Ne=Ue},6675:e=>{function t(e,t){const i=new RegExp(t,"g"),r=e.match(i);return r?r.length:0}e.exports=t,e.exports.default=t},7379:e=>{function t(e,t,i){const r=i&&i.debug||!1;r&&console.log("[xml-utils] getting "+t+" in "+e);const n="object"==typeof e?e.outer:e,o=n.slice(0,n.indexOf(">")+1),a=['"',"'"];for(let e=0;e<a.length;e++){const i=a[e],n=t+"\\="+i+"([^"+i+"]*)"+i;r&&console.log("[xml-utils] pattern:",n);const s=new RegExp(n).exec(o);if(r&&console.log("[xml-utils] match:",s),s)return s[1]}}e.exports=t,e.exports.default=t},8556:(e,t,i)=>{const r=i(3614),n=i(8694),o=i(6675);function a(e,t,i){const a=i&&i.debug||!1,s=!(i&&!1===typeof i.nested),l=i&&i.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",t," and ",i);const c=r(e,`<${t}[ \n>/]`,l);if(a&&console.log("[xml-utils] start:",c),-1===c)return;const u=e.slice(c+t.length);let h=n(u,"^[^<]*[ /]>",0);const f=-1!==h&&"/"===u[h-1];if(a&&console.log("[xml-utils] selfClosing:",f),!1===f)if(s){let e=0,i=1,r=0;for(;-1!==(h=n(u,"[ /]"+t+">",e));){const n=u.substring(e,h+1);if(i+=o(n,"<"+t+"[ \n\t>]"),r+=o(n,"</"+t+">"),r>=i)break;e=h}}else h=n(u,"[ /]"+t+">",0);const d=c+t.length+h+1;if(a&&console.log("[xml-utils] end:",d),-1===d)return;const g=e.slice(c,d);let m;return m=f?null:g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:m,outer:g,start:c,end:d}}e.exports=a,e.exports.default=a},8622:(e,t,i)=>{"use strict";i.d(t,{$:()=>r,AC:()=>c,Hm:()=>f,NZ:()=>o,S3:()=>h,TZ:()=>u,s$:()=>s,ub:()=>l});const r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},n={};for(const e in r)r.hasOwnProperty(e)&&(n[r[e]]=parseInt(e,10));const o=[n.BitsPerSample,n.ExtraSamples,n.SampleFormat,n.StripByteCounts,n.StripOffsets,n.StripRowCounts,n.TileByteCounts,n.TileOffsets,n.SubIFDs],a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s={};for(const e in a)a.hasOwnProperty(e)&&(s[a[e]]=parseInt(e,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},h={None:0,Deflate:1,Zstandard:2},f={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},d={};for(const e in f)f.hasOwnProperty(e)&&(d[f[e]]=parseInt(e,10))},8694:e=>{function t(e,t,i){const r=new RegExp(t).exec(e.slice(i));return r?i+r.index+r[0].length-1:-1}e.exports=t,e.exports.default=t}}]);