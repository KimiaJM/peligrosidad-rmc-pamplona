"use strict";(self.webpackChunksitna_map_project_by_kimia_jimenez_majidi=self.webpackChunksitna_map_project_by_kimia_jimenez_majidi||[]).push([[5924,9724],{5924:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var s=o(8038),i=o(3301);const r=class{#e;#t;constructor(e){const t=this;t.options=e||{},t.url=t.options.url,t.process=t.options.process,t.minimumElevation=t.options.minimumElevation,i.A.isFunction(t.options.request)&&(t.request=t.options.request),i.A.isFunction(t.options.parseResponse)&&(t.parseResponse=t.options.parseResponse)}async getElevation(e={}){const t=this,o={...e};void 0===o.resolution&&(o.resolution=t.options.resolution),void 0===o.sampleNumber&&(o.sampleNumber=t.options.sampleNumber);const s=await t.request(e);return(o.responseCallback||t.parseResponse).call(t,s,o)}async request(e={}){const t=this;if(e.dataInputs||e.body){const{default:i}=await o.e(761).then(o.bind(o,761)),r={process:e.process||t.process,dataInputs:e.dataInputs,responseType:SITNA.Consts.mimeType.JSON,version:e.serviceVersion||t.serviceVersion||"1.0.0",output:e.output},n="boolean"==typeof e.contentType?e.contentType:e.contentType||SITNA.Consts.mimeType.XML;return(await s.A.ajax({url:t.url,method:"POST",contentType:n,responseType:SITNA.Consts.mimeType.JSON,data:e.body||i.buildExecuteQuery(r)})).data}throw Error("Request is not valid for elevation service")}parseResponse(e,t){var o=this;return e.coordinates&&e.coordinates.forEach((function(e){e[2]<o.minimumElevation&&(e[2]=null)})),e.coordinates||[]}cancelRequest(e){}async getProxificationTool(){if(!this.#e){this.#t||(this.#t=Promise.resolve().then(o.bind(o,8991)));const e=(await this.#t).default;this.#e=new e(s.A.proxify)}return this.#e}}},9724:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var s=o(5924),i=o(3301);class r extends s.default{#o="https://data.geopf.fr/altimetrie/resources?keywords=Altitude";resourceId;constructor(){super(...arguments),this.url=this.options.url||"https://data.geopf.fr/altimetrie/1.0/calcul/alti/rest/elevation.json",this.minimumElevation=this.options.minimumElevation||-99998,this.nativeCRS="EPSG:4326"}async request(e={}){await this.#s();let t=e.coordinates;e.crs&&e.crs!==this.nativeCRS&&(t=i.A.reproject(t,e.crs,this.nativeCRS));const o={lon:t.map((e=>e[0])).join("|"),lat:t.map((e=>e[1])).join("|"),resource:this.resourceId,delimiter:"|",indent:"false",measures:"false",zonly:"false"};return await(await this.getProxificationTool()).fetchJSON(this.url,{method:"POST",contentType:"application/json",body:JSON.stringify(o)})}parseResponse(e,t){if(e.elevations){let o=e.elevations.map((e=>[e.lon,e.lat,e.z]));return t.crs&&t.crs!==this.nativeCRS&&(o=i.A.reproject(o,this.nativeCRS,t.crs)),super.parseResponse.call(this,{coordinates:o},t)}return[]}async#s(){if(!this.resourceId){const e=()=>{this.resourceId="ign_rge_alti_wld"};let t;try{t=await(await this.getProxificationTool()).fetchJSON(this.#o)}catch(t){console.error(t),e()}if(t.resources?.length){const e=t.resources[0];this.resourceId=e._id}else e()}}}const n=r}}]);